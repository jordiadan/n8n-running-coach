app = "running-coach-n8n"
primary_region = "fra"

[build]
dockerfile = "Dockerfile"

[env]
N8N_PORT = "5678"
N8N_LISTEN_ADDRESS = "0.0.0.0"
GENERIC_TIMEZONE = "Europe/Madrid"
TZ = "Europe/Madrid"

[[services]]
internal_port = 5678
protocol = "tcp"
[[services.ports]]
port = 80
handlers = ["http"]
[[services.ports]]
port = 443
handlers = ["tls", "http"]
[[services.http_checks]]
path = "/healthz"
interval = "30s"
timeout = "5s"
grace_period = "10s"
method = "GET"
protocol = "http"

# Optional but recommended: persistent volume for /home/node/.n8n
[[mounts]]
source = "n8n_data"
destination = "/home/node/.n8n"

# Optional resources
[vm]
memory = "512mb"
cpu_kind = "shared"
cpus = 1
