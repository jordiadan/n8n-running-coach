# Weekly Plan JSON Schema

This document defines the JSON Schema for weekly training plans generated by the system.

## Location

- Schema file: `schemas/weekly_plan.schema.json`
- Current version: `1.0`

## Purpose

The schema ensures that every weekly plan is structured, complete, and safe to deliver.
It is the source of truth for validation and guardrails.

## Top-Level Structure

Required fields:

- `schema_version` (string, required, currently `1.0`)
- `activityPlan` (object, required)
- `justification` (array of strings, required)

Optional fields:

- `extensions` (object, optional, free-form)

## activityPlan

Required:

- `nextWeek` (object with `phase`, `objective`, `weekStart`, `weekEnd`)
- `days` (array of exactly 7 daily sessions)

Optional:

- `warnings` (array of strings)
- `notes` (string)
- `extensions` (object, free-form)

## day object (in activityPlan.days)

Required:

- `day` (Spanish weekday name; accents allowed)
- `date` (YYYY-MM-DD)
- `activity` (string)
- `distance_time` (string)
- `intensity` (string, expected to include Z1â€“Z5 or interval labels)
- `goal` (string)

Optional:

- `note` (string)
- `warning` (string)
- `warnings` (array of strings)

## Extensibility

The schema is strict by default but allows extension via:

- `activityPlan.extensions`
- top-level `extensions`

This provides a safe place to add new fields without breaking validation.

## Validation Tests

Run unit tests against fixtures:

```bash
python3 -m pip install -r requirements-dev.txt
python3 tests/schema_test.py
```

Fixtures live in `tests/fixtures`:

- `weekly_plan_valid_*.json`
- `weekly_plan_invalid_*.json`

